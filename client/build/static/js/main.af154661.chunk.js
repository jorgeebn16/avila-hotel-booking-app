(this["webpackJsonpmern-client"]=this["webpackJsonpmern-client"]||[]).push([[0],{143:function(e,t,a){},171:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(23),s=a.n(r),o=(a(143),a(28)),i=a(27),l=a(33),u=(a(144),a(12)),d=a(24),j=a(2),b=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return Object(u.a)({},e)})).auth,a=Object(i.g)();return Object(j.jsxs)("div",{className:"nav bg-light d-flex justify-content-between",children:[Object(j.jsx)(o.b,{className:"nav-link",to:"/",children:"Home"}),null!==t&&Object(j.jsx)(o.b,{className:"nav-link pointer",to:"/dashboard",children:"Dashboard"}),null!==t&&Object(j.jsx)("a",{className:"nav-link pointer",onClick:function(){e({type:"LOGOUT",payload:null}),window.localStorage.removeItem("auth"),a.push("/")},children:"Logout"}),null===t&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(o.b,{className:"nav-link pointer",to:"/login",children:"Login"}),Object(j.jsx)(o.b,{className:"nav-link pointer",to:"/registration",children:"Registration"})]})]})},h=function(e){var t=Object.assign({},e),a=Object(d.c)((function(e){return Object(u.a)({},e)})).auth;return a&&a.token?Object(j.jsx)(i.b,Object(u.a)({},t)):Object(j.jsx)(i.a,{to:"/login"})},p=a(7),m=a.n(p),O=a(18),f=a(20),x=a(30),v=a.n(x),g=function(){var e=Object(O.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("".concat("http://localhost:8000/api","/create-hotel"),a,{headers:{Authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat("http://localhost:8000/api","/hotels"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(e,t){var a=new Date(e),n=new Date(t);return Math.round(Math.abs((a-n)/864e5))},y=function(){var e=Object(O.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat("http://localhost:8000/api","/seller-hotels"),{headers:{Authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(O.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.delete("".concat("http://localhost:8000/api","/delete-hotel/").concat(a),{headers:{Authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),S=function(){var e=Object(O.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat("http://localhost:8000/api","/hotel/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(O.a)(m.a.mark((function e(t,a,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("".concat("http://localhost:8000/api","/update-hotel/").concat(n),a,{headers:{Authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(O.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat("http://localhost:8000/api","/user-hotel-bookings"),{headers:{Authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(O.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat("http://localhost:8000/api","/is-already-booked/").concat(a),{headers:{Authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),I=function(){var e=Object(O.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("".concat("http://localhost:8000/api","/search-listings"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(O.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("".concat("http://localhost:8000/api","/create-connect-account"),{},{headers:{Authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(O.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.a.post("".concat("http://localhost:8000/api","/get-account-status"),{},{headers:{Authorization:"Bearer ".concat(t)}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(O.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.a.post("".concat("http://localhost:8000/api","/get-account-balance"),{},{headers:{Authorization:"Bearer ".concat(t)}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(e){return(e.amount/100).toLocaleString(e.currency,{style:"currency",currency:e.currency})},_=function(){var e=Object(O.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("".concat("http://localhost:8000/api","/payout-setting"),{},{headers:{Authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(O.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("".concat("http://localhost:8000/api","/stripe-session-id"),{hotelId:a},{headers:{Authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),M=function(){var e=Object(O.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("".concat("http://localhost:8000/api","/stripe-success"),{hotelId:a},{headers:{Authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),F=a(181),Y=a(182),P=function(e){var t=e.h,a=e.handleHotelDelete,n=void 0===a?function(e){return e}:a,c=e.owner,r=void 0!==c&&c,s=e.showViewMoreButton,l=void 0===s||s,u=Object(i.g)();return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"card mb-3",children:Object(j.jsxs)("div",{className:"row no-gutters",children:[Object(j.jsx)("div",{className:"col-md-4",children:t.image&&t.image.contentType?Object(j.jsx)("img",{src:"".concat("http://localhost:8000/api","/hotel/image/").concat(t._id),alt:"default hotel image",className:"card-image img img-fluid"}):Object(j.jsx)("img",{src:"https://via.placeholder.com/900x500.png?text=MERN+Booking",alt:"default hotel image",className:"card-image img img-fluid"})}),Object(j.jsx)("div",{className:"col-md-8",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsxs)("h3",{className:"card-title",children:[t.title,"",Object(j.jsx)("span",{className:"float-right text-primary",children:R({amount:100*t.price,currency:"usd"})})," "]}),Object(j.jsx)("p",{className:"alert alert-info",children:t.location}),Object(j.jsx)("p",{className:"card-text",children:"".concat(t.content.substring(0,200),"...")}),Object(j.jsx)("p",{className:"card-text",children:Object(j.jsxs)("span",{className:"float-right text-primary",children:["for ",w(t.from,t.to)," ",w(t.from,t.to)<=1?" day":" days"]})}),Object(j.jsxs)("p",{className:"card-text",children:[t.bed," bed"]}),Object(j.jsxs)("p",{className:"card-text",children:["Available from ",new Date(t.from).toLocaleDateString()]}),Object(j.jsxs)("div",{className:"d-flex justify-content-between h4",children:[l&&Object(j.jsx)("button",{onClick:function(){return u.push("/hotel/".concat(t._id))},className:"btn btn-primary",children:"Show more"}),r&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(o.b,{to:"/hotel/edit/".concat(t._id),children:Object(j.jsx)(F.a,{className:"text-warning"})}),Object(j.jsx)(Y.a,{onClick:function(){return n(t._id)},className:"text-danger"})]})]})]})})]})})})},V=a(175),U=a(177),z=a(137),H=a(78),G=a.n(H),J=a(26),Q=a.n(J),W=V.a.RangePicker,K=U.a.Option,q={appId:"pl814G7BVBQN",apiKey:"e119bf58de78692f8d25a2437deb6d43",language:"en"},X=function(){var e=Object(n.useState)(""),t=Object(f.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),s=Object(f.a)(r,2),o=s[0],l=s[1],u=Object(n.useState)(""),d=Object(f.a)(u,2),b=d[0],h=d[1],p=Object(i.g)();return Object(j.jsxs)("div",{className:"d-flex pb-4",children:[Object(j.jsx)("div",{className:"w-100",children:Object(j.jsx)(G.a,{placeholder:"Location",defaultValue:a,options:q,onChange:function(e){var t=e.suggestion;return c(t.value)},style:{height:"50px"}})}),Object(j.jsx)(W,{onChange:function(e,t){return l(t)},disabledDate:function(e){return e&&e.valueOf()<Q()().subtract(1,"days")},className:"w-100"}),Object(j.jsxs)(U.a,{onChange:function(e){return h(e)},className:"w-100",size:"large",placeholder:"Number of beds",children:[Object(j.jsx)(K,{children:1},1),Object(j.jsx)(K,{children:2},2),Object(j.jsx)(K,{children:3},3),Object(j.jsx)(K,{children:4},4)]}),Object(j.jsx)(z.a,{onClick:function(){p.push("/search-result?location=".concat(a,"&date=").concat(o,"&bed=").concat(b))},className:"btn btn-primary p-3 btn-square"})]})},$=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){r()}),[]);var r=function(){var e=Object(O.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:t=e.sent,c(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"container-fluid bg-white p-5 text-center",children:Object(j.jsx)("h1",{children:"All Hotels"})}),Object(j.jsxs)("div",{className:"col",children:[Object(j.jsx)("br",{}),Object(j.jsx)(X,{})]}),Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)("br",{}),a.map((function(e){return Object(j.jsx)(P,{h:e},e._id)}))]})]})},Z=function(){var e=Object(O.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("".concat("http://localhost:8000/api","/registration"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(O.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("".concat("http://localhost:8000/api","/login"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(e,t){if(window.localStorage.getItem("auth")){var a=JSON.parse(localStorage.getItem("auth"));a.user=e,localStorage.setItem("auth",JSON.stringify(a)),t()}},ae=function(e){var t=e.handleSubmit,a=e.email,n=e.setEmail,c=e.password,r=e.setPassword;return Object(j.jsxs)("form",{onSubmit:t,className:"mt-3",children:[Object(j.jsxs)("div",{className:"form-group mb-3",children:[Object(j.jsx)("label",{className:"form-label",children:"Email address"}),Object(j.jsx)("input",{type:"email",className:"form-control",placeholder:"Enter email",value:a,onChange:function(e){return n(e.target.value)}})]}),Object(j.jsxs)("div",{className:"form-group mb-3",children:[Object(j.jsx)("label",{className:"form-label",children:"Password"}),Object(j.jsx)("input",{type:"password",className:"form-control",placeholder:"Enter password",value:c,onChange:function(e){return r(e.target.value)}})]}),Object(j.jsx)("button",{disabled:!a||!c,className:"btn btn-primary",children:"Submit"})]})},ne=function(e){var t=e.history,a=Object(n.useState)(""),c=Object(f.a)(a,2),r=c[0],s=c[1],o=Object(n.useState)(""),i=Object(f.a)(o,2),u=i[0],b=i[1],h=Object(d.b)(),p=function(){var e=Object(O.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),console.log("SEND LOGIN DATA",{email:r,password:u}),e.prev=2,e.next=5,ee({email:r,password:u});case 5:(n=e.sent).data&&(console.log("SAVE USER RES IN REDUX AND LOCAL STORAGE THEN REDIRECT ===> "),window.localStorage.setItem("auth",JSON.stringify(n.data)),h({type:"LOGGED_IN_USER",payload:n.data}),t.push("/dashboard")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0),400===e.t0.response.status&&l.b.error(e.t0.response.data);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"container-fluid bg-white p-5 text-center",children:Object(j.jsx)("h1",{children:"Login"})}),Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-md-6 offset-md-3",children:Object(j.jsx)(ae,{handleSubmit:p,email:r,setEmail:s,password:u,setPassword:b})})})})]})},ce=function(e){var t=e.handleSubmit,a=e.name,n=e.setName,c=e.email,r=e.setEmail,s=e.password,o=e.setPassword;return Object(j.jsxs)("form",{onSubmit:t,className:"mt-3",children:[Object(j.jsxs)("div",{className:"form-group mb-3",children:[Object(j.jsx)("label",{className:"form-label",children:"Your name"}),Object(j.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter name",value:a,onChange:function(e){return n(e.target.value)}})]}),Object(j.jsxs)("div",{className:"form-group mb-3",children:[Object(j.jsx)("label",{className:"form-label",children:"Email address"}),Object(j.jsx)("input",{type:"email",className:"form-control",placeholder:"Enter email",value:c,onChange:function(e){return r(e.target.value)}})]}),Object(j.jsxs)("div",{className:"form-group mb-3",children:[Object(j.jsx)("label",{className:"form-label",children:"Password"}),Object(j.jsx)("input",{type:"password",className:"form-control",placeholder:"Enter password",value:s,onChange:function(e){return o(e.target.value)}})]}),Object(j.jsx)("button",{disabled:!a||!c||!s,className:"btn btn-primary",children:"Submit"})]})},re=function(e){var t=e.history,a=Object(n.useState)(""),c=Object(f.a)(a,2),r=c[0],s=c[1],o=Object(n.useState)(""),i=Object(f.a)(o,2),u=i[0],d=i[1],b=Object(n.useState)(""),h=Object(f.a)(b,2),p=h[0],x=h[1];console.log("history",t);var v=function(){var e=Object(O.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,Z({name:r,email:u,password:p});case 4:n=e.sent,console.log("User Registration ===>",n),l.b.success("Registration Successful, Please Login"),t.push("/login"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),400===e.t0.response.status&&l.b.error(e.t0.response.data);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"container-fluid bg-white p-5 text-center",children:Object(j.jsx)("h1",{children:"Registration"})}),Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-md-6 offset-md-3",children:Object(j.jsx)(ce,{handleSubmit:v,name:r,setName:s,email:u,setEmail:d,password:p,setPassword:x})})})})]})},se=function(){var e=window.location.pathname;return Object(j.jsxs)("ul",{className:"nav nav-tabs",children:[Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(o.b,{className:"nav-link ".concat("/dashboard"===e&&"active"),to:"/dashboard",children:"Your Bookings"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(o.b,{className:"nav-link ".concat("/dashboard/seller"===e&&"active"),to:"/dashboard/seller",children:"Your Hotels"})})]})},oe=a(176),ie=a(180),le=a(178),ue=a(183),de=oe.a.Meta,je=ie.a.Ribbon,be=function(){var e=Object(n.useState)(!1),t=Object(f.a)(e,2),a=(t[0],t[1]),c=Object(n.useState)(0),r=Object(f.a)(c,2),s=r[0],o=r[1],i=Object(d.c)((function(e){return Object(u.a)({},e)})).auth,b=i.user,h=i.token;Object(n.useEffect)((function(){A(i.token).then((function(e){console.log(e),o(e.data)}))}),[]);var p=function(){var e=Object(O.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,e.next=4,_(h);case 4:t=e.sent,window.location.href=t.data.url,a(!1),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),a(!1),Object(l.b)("Unable to access settings. Try again");case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(j.jsx)(oe.a,{children:Object(j.jsx)(de,{avatar:Object(j.jsx)(le.a,{children:b.name[0]}),title:b.name,description:"Joined ".concat(Q()(b.createdAt).fromNow())})}),i&&i.user&&i.user.stripe_seller&&i.user.stripe_seller.charges_enabled&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(je,{text:"Available",color:"blue",children:Object(j.jsx)(oe.a,{className:"bg-white pt-1",children:s&&s.pending&&s.pending.map((function(e,t){return Object(j.jsx)("span",{className:"lead",children:R(e)},t)}))})}),Object(j.jsx)(je,{text:"Payouts",color:"silver",children:Object(j.jsx)(oe.a,{onClick:p,className:"bg-white pointer",children:Object(j.jsx)(ue.a,{className:"h5 pt-2"})})})]})]})},he=a(179),pe=function(e){var t=e.session,a=e.orderedBy,n=e.showModal,c=e.setShowModal;return Object(j.jsxs)(he.a,{visible:n,title:"Order payment info",onCancel:function(){return c(!n)},children:[Object(j.jsxs)("p",{children:["Payment status: ",t.payment_status]}),Object(j.jsxs)("p",{children:["Amount total: ",t.currency.toUpperCase()," ",t.amount_total/100+" per night"]}),Object(j.jsxs)("p",{children:["Customer id: ",t.customer]}),Object(j.jsxs)("p",{children:["Customer: ",a.name]})]})},me=function(e){var t=e.hotel,a=e.session,c=e.orderedBy,r=Object(n.useState)(!1),s=Object(f.a)(r,2),o=s[0],l=s[1];Object(i.g)();return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"card mb-3",children:Object(j.jsxs)("div",{className:"row no-gutters",children:[Object(j.jsx)("div",{className:"col-md-4",children:t.image&&t.image.contentType?Object(j.jsx)("img",{src:"".concat("http://localhost:8000/api","/hotel/image/").concat(t._id),alt:"default hotel image",className:"card-image img img-fluid"}):Object(j.jsx)("img",{src:"https://via.placeholder.com/900x500.png?text=MERN+Booking",alt:"default hotel image",className:"card-image img img-fluid"})}),Object(j.jsx)("div",{className:"col-md-8",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsxs)("h3",{className:"card-title",children:[t.title," ",Object(j.jsx)("span",{className:"float-right text-primary",children:R({amount:100*t.price,currency:"usd"})})," "]}),Object(j.jsx)("p",{className:"alert alert-info",children:t.location}),Object(j.jsx)("p",{className:"card-text",children:"".concat(t.content.substring(0,200),"...")}),Object(j.jsx)("p",{className:"card-text",children:Object(j.jsxs)("span",{className:"float-right text-primary",children:["for ",w(t.from,t.to)," ",w(t.from,t.to)<=1?" day":" days"]})}),Object(j.jsxs)("p",{className:"card-text",children:[t.bed," bed"]}),Object(j.jsxs)("p",{className:"card-text",children:["Available from ",new Date(t.from).toLocaleDateString()]}),o&&Object(j.jsx)(pe,{session:a,orderedBy:c,showModal:o,setShowModal:l}),Object(j.jsx)("div",{className:"d-flex justify-content-between h4",children:Object(j.jsx)("button",{onClick:function(){return l(!o)},className:"btn btn-primary",children:"Show Payment info"})})]})})]})})})},Oe=function(){var e=Object(d.c)((function(e){return Object(u.a)({},e)})).auth.token,t=Object(n.useState)([]),a=Object(f.a)(t,2),c=a[0],r=a[1];Object(n.useEffect)((function(){s()}),[]);var s=function(){var t=Object(O.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(e);case 2:a=t.sent,console.log(a),r(a.data);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"container-fluid bg-white p-5",children:Object(j.jsx)(be,{})}),Object(j.jsx)("div",{className:"container-fluid p-4",children:Object(j.jsx)(se,{})}),Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-md-10",children:Object(j.jsx)("h2",{children:"Your Bookings"})}),Object(j.jsx)("div",{className:"col-md-2",children:Object(j.jsx)(o.b,{to:"/",className:"btn btn-primary",children:"Browse Hotels"})})]})}),Object(j.jsx)("div",{className:"row",children:c.map((function(e){return Object(j.jsx)(me,{hotel:e.hotel,session:e.session,orderedBy:e.orderedBy},e._id)}))})]})},fe=a(184),xe=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],c=t[1],r=Object(d.c)((function(e){return Object(u.a)({},e)})).auth,s=Object(n.useState)(!1),i=Object(f.a)(s,2),b=i[0],h=i[1];Object(n.useEffect)((function(){p()}),[]);var p=function(){var e=Object(O.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(r.token);case 2:t=e.sent,a=t.data,c(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(O.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.prev=1,e.next=4,B(r.token);case 4:t=e.sent,console.log(t),window.location.href=t.data,e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),l.b.error("Stripe connect failed, Try again."),h(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(O.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Want to delete this Hotel?")){e.next=2;break}return e.abrupt("return");case 2:k(r.token,t).then((function(e){l.b.success("Hotel Deleted"),p()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"container-fluid bg-white p-5",children:Object(j.jsx)(be,{})}),Object(j.jsx)("div",{className:"container-fluid p-4",children:Object(j.jsx)(se,{})}),r&&r.user&&r.user.stripe_seller&&r.user.stripe_seller.charges_enabled?Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-md-10",children:Object(j.jsx)("h2",{children:"Your Hotels"})}),Object(j.jsx)("div",{className:"col-md-2",children:Object(j.jsx)(o.b,{to:"/hotels/new",className:"btn btn-primary",children:"+ Add New"})})]}),Object(j.jsx)("div",{className:"row",children:a.map((function(e){return Object(j.jsx)(P,{h:e,showViewMoreButton:!1,owner:!0,handleHotelDelete:v},e._id)}))})]}):Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-md-6 offset-md-3 text-center",children:Object(j.jsxs)("div",{className:"p-5 pointer",children:[Object(j.jsx)(fe.a,{className:"h1"}),Object(j.jsx)("h4",{children:"Setup payouts to post hotel rooms"}),Object(j.jsx)("p",{className:"lead",children:"MERN partners with stripe to transfer earnings to your bank account"}),Object(j.jsx)("button",{disabled:b,onClick:x,className:"btn btn-primary mb-3",children:b?"Processing...":"Setup Payouts"}),Object(j.jsx)("p",{className:"text-muted",children:Object(j.jsx)("small",{children:"You'll be redirected to Stripe to complete the onboarding process."})})]})})})})]})},ve=a(75),ge=a(134),Ne=U.a.Option,we={appId:"pl814G7BVBQN",apiKey:"e119bf58de78692f8d25a2437deb6d43",language:"en"},ye=function(e){var t=e.values,a=e.setValues,n=e.handleChange,c=e.handleImageChange,r=e.handleSubmit,s=e.location,o=e.setLocation,i=t.title,l=t.content,d=t.price;return Object(j.jsxs)("form",{onSubmit:r,children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsxs)("label",{className:"btn btn-outline-primary btn-block m-2 text-left",children:["Image",Object(j.jsx)("input",{type:"file",name:"image",onChange:c,accept:"image/*",hidden:!0})]}),Object(j.jsx)("input",{type:"text",name:"title",onChange:n,placeholder:"Title",className:"form-control m-2",value:i}),Object(j.jsx)("textarea",{name:"content",onChange:n,placeholder:"Content",className:"form-control m-2",value:l}),Object(j.jsx)(G.a,{className:"form-control m-2",placeholder:"Location",defaultValue:s,options:we,onChange:function(e){var t=e.suggestion;return o(t.value)},style:{height:"50px"}}),Object(j.jsx)("input",{type:"number",name:"price",onChange:n,placeholder:"Price",className:"form-control m-2",value:d}),Object(j.jsxs)(U.a,{onChange:function(e){return a(Object(u.a)(Object(u.a)({},t),{},{bed:e}))},className:"w-100 m-2",size:"large",placeholder:"Number of rooms",children:[Object(j.jsx)(Ne,{children:1},1),Object(j.jsx)(Ne,{children:2},2),Object(j.jsx)(Ne,{children:3},3),Object(j.jsx)(Ne,{children:4},4)]})]}),Object(j.jsx)(V.a,{placeholder:"From date",className:"form-control m-2",onChange:function(e,n){return a(Object(u.a)(Object(u.a)({},t),{},{from:n}))},disabledDate:function(e){return e&&e.valueOf()<Q()().subtract(1,"days")}}),Object(j.jsx)(V.a,{placeholder:"To date",className:"form-control m-2",onChange:function(e,n){return a(Object(u.a)(Object(u.a)({},t),{},{to:n}))},disabledDate:function(e){return e&&e.valueOf()<Q()().subtract(1,"days")}}),Object(j.jsx)("button",{className:"btn btn-outline-primary m-2",children:"Save"})]})},ke=(U.a.Option,function(){var e=Object(d.c)((function(e){return Object(u.a)({},e)})).auth.token,t=Object(n.useState)({title:"",content:"",image:"",price:"",from:"",to:"",bed:""}),a=Object(f.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)("https://via.placeholder.com/100x100.png?text=PREVIEW"),o=Object(f.a)(s,2),i=o[0],b=o[1],h=Object(n.useState)(""),p=Object(f.a)(h,2),x=p[0],v=p[1],N=c.title,w=c.content,y=c.image,k=c.price,S=c.from,C=c.to,E=c.bed,D=function(){var t=Object(O.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),console.log(c),console.log(x),(n=new FormData).append("title",N),n.append("content",w),n.append("location",x),n.append("price",k),y&&n.append("image",y),n.append("from",S),n.append("to",C),n.append("bed",E),console.log(Object(ge.a)(n)),t.prev=13,t.next=16,g(e,n);case 16:r=t.sent,console.log("HOTEL CREATION RES",r),l.b.success("New hotel is posted"),setTimeout((function(){window.location.reload()}),1e3),t.next=26;break;case 22:t.prev=22,t.t0=t.catch(13),console.log(t.t0),l.b.error(t.t0.response.data);case 26:case"end":return t.stop()}}),t,null,[[13,22]])})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"container-fluid bg-white p-5 text-center",children:Object(j.jsx)("h2",{children:"Add Hotel"})}),Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"col-md-10",children:[Object(j.jsx)("br",{}),Object(j.jsx)(ye,{values:c,setValues:r,handleChange:function(e){r(Object(u.a)(Object(u.a)({},c),{},Object(ve.a)({},e.target.name,e.target.value)))},handleImageChange:function(e){b(URL.createObjectURL(e.target.files[0])),r(Object(u.a)(Object(u.a)({},c),{},{image:e.target.files[0]}))},handleSubmit:D,location:x,setLocation:v})]}),Object(j.jsxs)("div",{className:"col-md-2",children:[Object(j.jsx)("img",{src:i,alt:"preview_image",className:"img img-fluid m-2"}),Object(j.jsx)("pre",{children:JSON.stringify(c,null,4)}),JSON.stringify(x)]})]})})]})}),Se=a(70),Ce=function(e){e.history;var t=Object(d.c)((function(e){return Object(u.a)({},e)})).auth,a=Object(d.b)();Object(n.useEffect)((function(){t&&t.token&&c()}),[t]);var c=function(){var e=Object(O.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L(t.token);case 3:n=e.sent,te(n.data,(function(){a({type:"LOGGED_IN_USER",payload:n.data}),window.location.href="/dashboard/seller"})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"d-flex justify-content-center p-5",children:Object(j.jsx)(Se.a,{className:"display-1 p-5 text-danger"})})},Ee=U.a.Option,De={appId:"pl814G7BVBQN",apiKey:"e119bf58de78692f8d25a2437deb6d43",language:"en"},Ie=function(e){var t=e.values,a=e.setValues,n=e.handleChange,c=e.handleImageChange,r=e.handleSubmit,s=t.title,o=t.content,i=t.location,l=t.price,d=t.bed,b=t.from,h=t.to;return Object(j.jsxs)("form",{onSubmit:r,children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsxs)("label",{className:"btn btn-outline-secondary btn-block m-2 text-left",children:["Image",Object(j.jsx)("input",{type:"file",name:"image",onChange:c,accept:"image/*",hidden:!0})]}),Object(j.jsx)("input",{type:"text",name:"title",onChange:n,placeholder:"Title",className:"form-control m-2",value:s}),Object(j.jsx)("textarea",{name:"content",onChange:n,placeholder:"Content",className:"form-control m-2",value:o}),i&&i.length&&Object(j.jsx)(G.a,{className:"form-control m-2",placeholder:"Location",defaultValue:i,options:De,onChange:function(e){var n=e.suggestion;return a(Object(u.a)(Object(u.a)({},t),{},{location:n.value}))},style:{height:"50px"}}),Object(j.jsx)("input",{type:"number",name:"price",onChange:n,placeholder:"Price",className:"form-control m-2",value:l}),Object(j.jsxs)(U.a,{onChange:function(e){return a(Object(u.a)(Object(u.a)({},t),{},{bed:e}))},className:"w-100 m-2",size:"large",placeholder:"Number of beds",value:d,children:[Object(j.jsx)(Ee,{children:1},1),Object(j.jsx)(Ee,{children:2},2),Object(j.jsx)(Ee,{children:3},3),Object(j.jsx)(Ee,{children:4},4)]})]}),b&&Object(j.jsx)(V.a,{defaultValue:Q()(b,"YYYY-MM-DD"),placeholder:"From date",className:"form-control m-2",onChange:function(e,n){return a(Object(u.a)(Object(u.a)({},t),{},{from:n}))},disabledDate:function(e){return e&&e.valueOf()<Q()().subtract(1,"days")}}),h&&Object(j.jsx)(V.a,{defaultValue:Q()(h,"YYYY-MM-DD"),placeholder:"To date",className:"form-control m-2",onChange:function(e,n){return a(Object(u.a)(Object(u.a)({},t),{},{to:n}))},disabledDate:function(e){return e&&e.valueOf()<Q()().subtract(1,"days")}}),Object(j.jsx)("button",{className:"btn btn-outline-primary m-2",children:"Save"})]})},Be=(U.a.Option,function(e){var t=e.match,a=Object(d.c)((function(e){return Object(u.a)({},e)})).auth.token,c=Object(n.useState)({title:"",content:"",location:"",price:"",from:"",to:"",bed:""}),r=Object(f.a)(c,2),s=r[0],o=r[1],i=Object(n.useState)(""),b=Object(f.a)(i,2),h=b[0],p=b[1],x=Object(n.useState)("https://via.placeholder.com/100x100.png?text=PREVIEW"),v=Object(f.a)(x,2),g=v[0],N=v[1],w=s.title,y=s.content,k=s.price,E=s.from,D=s.to,I=s.bed,B=s.location;Object(n.useEffect)((function(){L()}),[]);var L=function(){var e=Object(O.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t.params.hotelId);case 2:a=e.sent,console.log(a),o(Object(u.a)(Object(u.a)({},s),a.data)),N("".concat("http://localhost:8000/api","/hotel/image/").concat(a.data._id));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(O.a)(m.a.mark((function e(n){var c,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),(c=new FormData).append("title",w),c.append("content",y),c.append("location",B),c.append("price",k),h&&c.append("image",h),c.append("from",E),c.append("to",D),c.append("bed",I),e.prev=10,e.next=13,C(a,c,t.params.hotelId);case 13:r=e.sent,console.log("HOTEL UPDATE RES",r),l.b.success("".concat(r.data.title," is updated")),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(10),console.log(e.t0),l.b.error(e.t0.response.data.err);case 22:case"end":return e.stop()}}),e,null,[[10,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"container-fluid bg-white p-5 text-center",children:Object(j.jsx)("h2",{children:"Edit Hotel"})}),Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"col-md-10",children:[Object(j.jsx)("br",{}),Object(j.jsx)(Ie,{values:s,setValues:o,handleChange:function(e){o(Object(u.a)(Object(u.a)({},s),{},Object(ve.a)({},e.target.name,e.target.value)))},handleImageChange:function(e){N(URL.createObjectURL(e.target.files[0])),p(e.target.files[0])},handleSubmit:A})]}),Object(j.jsxs)("div",{className:"col-md-2",children:[Object(j.jsx)("img",{src:g,alt:"preview_image",className:"img img-fluid m-2"}),Object(j.jsx)("pre",{children:JSON.stringify(s,null,4)})]})]})})]})}),Le=a(128),Ae=function(e){var t=e.match,a=e.history,c=Object(n.useState)({}),r=Object(f.a)(c,2),s=r[0],o=r[1],i=Object(n.useState)(""),l=Object(f.a)(i,2),b=l[0],h=l[1],p=Object(n.useState)(!1),x=Object(f.a)(p,2),v=x[0],g=x[1],N=Object(n.useState)(!1),y=Object(f.a)(N,2),k=y[0],C=y[1],E=Object(d.c)((function(e){return Object(u.a)({},e)})).auth;Object(n.useEffect)((function(){I()}),[]),Object(n.useEffect)((function(){E&&E.token&&D(E.token,t.params.hotelId).then((function(e){console.log(e),e.data.ok&&C(!0)}))}),[]);var I=function(){var e=Object(O.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t.params.hotelId);case 2:a=e.sent,o(a.data),h("".concat("http://localhost:8000/api","/hotel/image/").concat(a.data._id));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(O.a)(m.a.mark((function e(n){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),E&&E.token){e.next=4;break}return a.push("/login"),e.abrupt("return");case 4:return g(!0),E||a.push("/login"),e.next=8,T(E.token,t.params.hotelId);case 8:return c=e.sent,e.next=11,Object(Le.a)("pk_test_TYooMQauvdEDq54NiTphI7jx");case 11:e.sent.redirectToCheckout({sessionId:c.data.sessionId}).then((function(e){return console.log(e)}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"container-fluid bg-white p-5 text-center",children:Object(j.jsx)("h1",{children:s.title})}),Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"col-md-6",children:[Object(j.jsx)("br",{}),Object(j.jsx)("img",{src:b,alt:s.title,className:"img img-fluid m-2"})]}),Object(j.jsxs)("div",{className:"col-md-6",children:[Object(j.jsx)("br",{}),Object(j.jsx)("b",{children:s.content}),Object(j.jsxs)("p",{className:"alert alert-info mt-3",children:["$",s.price]}),Object(j.jsx)("p",{className:"card-text",children:Object(j.jsxs)("span",{className:"float-right text-primary",children:["for ",w(s.from,s.to)," ",w(s.from,s.to)<=1?" day":" days"]})}),Object(j.jsxs)("p",{children:["From ",Object(j.jsx)("br",{})," ",Q()(new Date(s.from)).format("MMMM Do YYYY, h:mm:ss a")]}),Object(j.jsxs)("p",{children:["To ",Object(j.jsx)("br",{})," ",Q()(new Date(s.to)).format("MMMM Do YYYY, h:mm:ss a")]}),Object(j.jsxs)("i",{children:["Posted by ",s.postedBy&&s.postedBy.name]}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{onClick:B,className:"btn btn-block btn-lg btn-primary mt-3",disabled:v||k,children:v?"Loading...":k?"Already Booked":E&&E.token?"Book Now":"Login to Book"})]})]})})]})},Re=function(e){var t=e.match,a=e.history,c=Object(d.c)((function(e){return Object(u.a)({},e)})).auth.token;return Object(n.useEffect)((function(){M(c,t.params.hotelId).then((function(e){e.data.success?(console.log("stripe success response",e.data),a.push("/dashboard")):a.push("/stripe/cancel")}))}),[t.params.hotelId]),Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{className:"d-flex justify-content-center p-5",children:Object(j.jsx)(Se.a,{className:"display-1 text-danger p-5"})})})},_e=function(){return Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("h2",{className:"text-center p-5",children:"Payment failed. Try again."})})})},Te=a(129),Me=a.n(Te),Fe=function(){var e=Object(n.useState)(""),t=Object(f.a)(e,2),a=(t[0],t[1],Object(n.useState)("")),c=Object(f.a)(a,2),r=(c[0],c[1],Object(n.useState)("")),s=Object(f.a)(r,2),o=(s[0],s[1],Object(n.useState)([])),i=Object(f.a)(o,2),l=i[0],u=i[1];return Object(n.useEffect)((function(){var e=Me.a.parse(window.location.search),t=e.location,a=e.date,n=e.bed;console.table({location:t,date:a,bed:n}),I({location:t,date:a,bed:n}).then((function(e){console.log("SEARCH RESULTS ===>",e.data),u(e.data)}))}),[window.location.search]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"col",children:[Object(j.jsx)("br",{}),Object(j.jsx)(X,{})]}),Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{className:"row",children:l.map((function(e){return Object(j.jsx)(P,{h:e},e._id)}))})})]})};var Ye,Pe=function(){return Object(j.jsxs)(o.a,{children:[Object(j.jsx)(b,{}),Object(j.jsx)(l.a,{position:"top-right"}),Object(j.jsxs)(i.d,{children:[Object(j.jsx)(i.b,{exact:!0,path:"/",component:$}),Object(j.jsx)(i.b,{exact:!0,path:"/login",component:ne}),Object(j.jsx)(i.b,{exact:!0,path:"/registration",component:re}),Object(j.jsx)(h,{exact:!0,path:"/dashboard",component:Oe}),Object(j.jsx)(h,{exact:!0,path:"/dashboard/seller",component:xe}),Object(j.jsx)(h,{exact:!0,path:"/hotels/new",component:ke}),Object(j.jsx)(h,{exact:!0,path:"/stripe/callback",component:Ce}),Object(j.jsx)(h,{exact:!0,path:"/hotel/edit/:hotelId",component:Be}),Object(j.jsx)(i.b,{exact:!0,path:"/hotel/:hotelId",component:Ae}),Object(j.jsx)(h,{exact:!0,path:"/stripe/success/:hotelId",component:Re}),Object(j.jsx)(h,{exact:!0,path:"/stripe/cancel",component:_e}),Object(j.jsx)(i.b,{exact:!0,path:"/search-result",component:Fe})]})]})},Ve=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,185)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))},Ue=a(64),ze=a(130);Ye=window.localStorage.getItem("auth")?JSON.parse(window.localStorage.getItem("auth")):null;var He=Object(Ue.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGGED_IN_USER":return Object(u.a)(Object(u.a)({},e),t.payload);case"LOGOUT":return t.payload;default:return e}}}),Ge=(a(170),Object(Ue.createStore)(He,Object(ze.composeWithDevTools)()));s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(d.a,{store:Ge,children:Object(j.jsx)(Pe,{})})}),document.getElementById("root")),Ve()}},[[171,1,2]]]);
//# sourceMappingURL=main.af154661.chunk.js.map